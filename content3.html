<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<title>3. PONT ‚Äì √öt a v√°ros sz√≠v√©be (Glanzenberg-t√°rna)</title>

<!-- Mobiloptimaliz√°l√°s -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    font-family: 'Georgia', serif;
    background: url('tarna.png') center/cover no-repeat fixed;
    color: #f5f5f5;
    padding: 20px;
    margin: 0;
}

.container {
    max-width: 700px;
    margin: auto;
    background: rgba(0,0,0,0.65);
    padding: 30px;
    border-radius: 14px;
    box-shadow: 0 0 25px rgba(0,0,0,0.6);
}

/* C√≠m */
h1 {
    font-size: 32px;
    margin-bottom: 15px;
    text-align: center;
    color: #ffe7a3;
}

/* Sz√∂veg */
p {
    line-height: 1.6;
    font-size: 18px;
    margin-bottom: 14px;
}

.highlight {
    color: #ffe7a3;
    font-weight: bold;
}

/* T√°vols√°g doboz */
.distance-box {
    margin: 10px 0 20px 0;
    padding: 12px 16px;
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.45);
    font-size: 16px;
    text-align: center;
}
.distance-box button {
    font-family: inherit;
    font-size: 16px;
    padding: 8px 14px;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    background: #ffe7a3;
    color: #2b1b0c;
    margin-bottom: 8px;
}
.distance-box button:active {
    transform: scale(0.98);
}
.distance-status {
    display: block;
    margin-top: 4px;
    font-size: 15px;
}

/* gombsor */
.btn-row {
    text-align: center;
    margin-top: 10px;
}

/* Navig√°ci√≥s gomb ‚Äì √©gk√©k (lap alj√°n) */
.nav-btn {
    display: inline-block;
    margin: 6px 4px;
    padding: 9px 18px;
    background: #68c7ff; /* √©gk√©k */
    color: #033048;
    font-weight: bold;
    border-radius: 8px;
    text-decoration: none;
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
    font-size: 15px;
}
.nav-btn:hover {
    filter: brightness(1.05);
}

/* F≈ëoldal gomb */
.home-btn {
    display: inline-block;
    margin: 8px 4px 0 4px;
    padding: 9px 18px;
    background: #ffe7a3;
    color: #333;
    font-weight: bold;
    border-radius: 8px;
    text-decoration: none;
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
    font-size: 15px;
}
.home-btn:hover {
    filter: brightness(1.05);
}

/* Mobil finomhangol√°s */
@media (max-width: 480px) {
    body { padding: 10px; }
    .container { padding: 22px; }
    h1 { font-size: 26px; }
    p { font-size: 17px; }
}
</style>
</head>

<body>

<div class="container">

<h1>3. PONT ‚Äì √öt a v√°ros sz√≠v√©be<br><span style="font-size:20px;">Glanzenberg-t√°rna</span></h1>

<!-- T√ÅVOLS√ÅGM√âR√âS -->
<div class="distance-box">
    <button id="startNavBtn">T√°vols√°g m√©r√©se (GPS)</button>
    <span id="distanceText" class="distance-status">
        Enged√©lyezd a helymeghat√°roz√°st a b√∂ng√©sz≈ëben.
    </span>
</div>

<p>A <span class="highlight">Glanzenberg-t√°rna</span> Selmecb√°nya egyik leg≈ësibb √©s legmes√©sebb b√°ny√°ja.  
A falak m√©g mindig ≈ërzik a cs√°k√°nyok ritmus√°t, a b√°ny√°szok dalait,  
√©s azt a fajta b√ºszke csendet, amit csak a hegy gyomr√°ban lehet megtapasztalni.</p>

<p>De volt egyszer egy nap, amikor ide nem egy √°tlagos l√°togat√≥ √©rkezett.</p>

<p>A selmeciek √∫gy mes√©lik, hogy megjelent itt egy nagyon h√≠res, nagyon fontos,  
√©s h√°t‚Ä¶ <span class="highlight">nagyon bajuszos √∫r</span>.  
Olyan bajusza volt, hogy ha a hegytet≈ën √°llt, k√ºl√∂n √°rny√©ka vet√ºlt a t√°jra.</p>

<p>≈ê az, akinek a nev√©t ma az Alpok egyik legh√≠resebb kil√°t√≥helye viseli:  
<span class="highlight">Franz-Josefs-H√∂he</span>,  
ahonnan a gyerekek is j√≥l ismerik a Gro√üglockner gleccsereit.</p>

<p>Na, ez a tekint√©lyes bajusz-tulajdonos itt j√°rt a Glanzenbergben is,  
√©s a b√°ny√°szok akkora megtiszteltet√©snek vett√©k, hogy eml√©kt√°bl√°t √°ll√≠tottak neki.  
Nem hars√°ny, nem vil√°g√≠t LED-f√©nnyel, de ott van, k≈ëbe v√©sve, ahogy illik.</p>

<h2 style="color:#ffe7a3; text-align:center; margin-top:30px;">Feladat</h2>

<p>Keress√©tek meg ezt a t√°bl√°t,  
√©s fejtsetek meg r√≥la egy <span class="highlight">√©vsz√°mot</span>.</p>

<p>Ez annak az √©vnek a sz√°ma,  
<span class="highlight">amikor a nagybajusz√∫ √∫r megl√°togatta a t√°rn√°t</span>.</p>

<p class="highlight" style="font-size:20px; text-align:center; margin-top:25px;">
Ez az √©vsz√°m lesz a k√∂vetkez≈ë p√°lya titkos k√≥dja.
</p>

<p>Ha megtal√°lj√°tok, ny√≠lik a kapu.  
Ha nem‚Ä¶ a hegy majd finoman r√°mutat,  
hogy √©rdemes m√©g egyszer k√∂r√ºln√©zni.</p>

<p style="text-align:center; margin-top:25px; font-size:18px;">
Induljon a kutat√°s.<br>
Aki tudja, <span class="highlight">kinek a kil√°t√≥helye</span> van a Gro√üglockneren,  
az a k√≥dot is meg fogja tal√°lni.
</p>

<!-- NAVIG√ÅCI√ìS GOMB ‚Äì LAP ALJ√ÅN -->
<div class="btn-row">
    <a href="https://maps.app.goo.gl/ZBj2kDkzA6FSphBV8" 
       target="_blank" 
       class="nav-btn">
        üìç √ötvonal a Glanzenberg-t√°rn√°hoz
    </a>
</div>

<!-- F≈êOLDAL GOMB -->
<div class="btn-row">
    <a href="index.html" class="home-btn">‚¨Ö Vissza a f≈ëoldalra</a>
</div>

</div>

<script>
// Glanzenberg-t√°rna t√°vols√°gm√©r√©s c√©lpontja
const targetLat = 48.45706942700705;
const targetLon = 18.90034850486971;

const startBtn = document.getElementById("startNavBtn");
const distanceText = document.getElementById("distanceText");
let watchId = null;

// Haversine t√°vols√°g m√©terben
function distanceMeters(lat1, lon1, lat2, lon2) {
    const R = 6371000;
    const toRad = x => x * Math.PI / 180;
    const dLat = toRad(lat2 - lat1);
    const dLon = toRad(lon2 - lon1);
    const a =
        Math.sin(dLat / 2) * Math.sin(dLat / 2) +
        Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) *
        Math.sin(dLon / 2) * Math.sin(dLon / 2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    return R * c;
}

function formatDistance(m) {
    if (m < 5) return "Nagyj√°b√≥l a t√°rna bej√°rat√°n√°l vagy.";
    if (m < 1000) return m.toFixed(0) + " m√©ter";
    return (m / 1000).toFixed(2) + " km";
}

function onPosition(pos) {
    const lat = pos.coords.latitude;
    const lon = pos.coords.longitude;
    const dist = distanceMeters(lat, lon, targetLat, targetLon);
    distanceText.textContent =
        "Jelenlegi t√°vols√°g a t√°rna bej√°rat√°t√≥l: " + formatDistance(dist);
}

function onError(err) {
    distanceText.textContent =
        "Nem siker√ºlt lek√©rni a helyzetet. Ellen≈ërizd a GPS √©s a jogosults√°g be√°ll√≠t√°sait.";
}

startBtn.addEventListener("click", function () {
    if (!("geolocation" in navigator)) {
        distanceText.textContent =
            "A b√∂ng√©sz≈ë nem t√°mogatja a helymeghat√°roz√°st.";
        return;
    }

    if (watchId !== null) {
        // m√°r fut, le√°ll√≠tjuk
        navigator.geolocation.clearWatch(watchId);
        watchId = null;
        distanceText.textContent = "A t√°vols√°gm√©r√©s sz√ºnetel.";
        startBtn.textContent = "T√°vols√°g m√©r√©se (GPS)";
        return;
    }

    distanceText.textContent = "Helyzet lek√©r√©se...";
    startBtn.textContent = "M√©r√©s le√°ll√≠t√°sa";

    watchId = navigator.geolocation.watchPosition(onPosition, onError, {
        enableHighAccuracy: true,
        maximumAge: 5000,
        timeout: 10000
    });
});
</script>

</body>
</html>
